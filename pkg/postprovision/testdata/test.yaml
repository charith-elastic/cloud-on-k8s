---
noProgressTimeout: 300s
target:
  kind: Elasticsearch
  namespace: default
  name: hulk
clientConf:
  requestTimeout: 30s
  retryAttempts: 3
  retryBackoff: 10s
  retryMaxDuration: 150s
apiCalls:
  - method: PUT
    path: /_ilm/policy/my_policy
    payload: {
      "policy": {
        "phases": {
          "hot": {
            "actions": {
              "rollover": {
                "max_size": "25GB"
              }
            }
          },
          "delete": {
            "min_age": "30d",
            "actions": {
              "delete": {}
            }
          }
        }
      }
    }
    successCodes: [200]
    retry: true
  - method: PUT
    path: /_cluster/settings
    payload: {
      "transient": {
        "indices.lifecycle.poll_interval": "3m"
      }
    }
    successCodes: [200]
    retry: true
